#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

echo "üöÄ –ó–∞–ø—É—Å–∫ WMOC SaaS Platform –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω
if ! docker ps > /dev/null 2>&1; then
    echo "‚ùå Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop."
    exit 1
fi

# –ó–∞–ø—É—Å–∫ PostgreSQL –∏ Redis
echo "üì¶ –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (PostgreSQL, Redis)..."
docker compose up -d postgres redis

# –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
if ! docker compose ps | grep -q "healthy"; then
    echo "‚ö†Ô∏è  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤—ã. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ."
fi

echo "‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã"
echo ""
echo "üìù –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:"
echo "   - Backend API –±—É–¥–µ—Ç –Ω–∞ http://localhost:3000"
echo "   - Frontend –±—É–¥–µ—Ç –Ω–∞ http://localhost:3001"
echo ""
echo "–î–ª—è –∑–∞–ø—É—Å–∫–∞ backend: npm run dev"
echo "–î–ª—è –∑–∞–ø—É—Å–∫–∞ frontend: cd frontend && npm run dev -- -p 3001"
echo "–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: npm run dev:full (–∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)"
echo ""

